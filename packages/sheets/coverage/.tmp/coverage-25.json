{"/Users/zhongjiafeng/Desktop/5000_Project/github/githubuniver/univer/packages/sheets/src/basics/row-column-value.ts":{"path":"/Users/zhongjiafeng/Desktop/5000_Project/github/githubuniver/univer/packages/sheets/src/basics/row-column-value.ts","statementMap":{"0":{"start":{"line":3,"column":2},"end":{"line":5,"column":3}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":22}},"2":{"start":{"line":6,"column":14},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":15}},"5":{"start":{"line":10,"column":17},"end":{"line":10,"column":19}},"6":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}},"8":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":23}},"10":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":23}},"12":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"13":{"start":{"line":21,"column":4},"end":{"line":21,"column":23}},"14":{"start":{"line":23,"column":2},"end":{"line":25,"column":3}},"15":{"start":{"line":24,"column":4},"end":{"line":24,"column":21}},"16":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"17":{"start":{"line":27,"column":4},"end":{"line":27,"column":31}},"18":{"start":{"line":29,"column":2},"end":{"line":29,"column":16}},"19":{"start":{"line":32,"column":2},"end":{"line":34,"column":3}},"20":{"start":{"line":33,"column":4},"end":{"line":33,"column":24}},"21":{"start":{"line":35,"column":17},"end":{"line":35,"column":46}},"22":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"23":{"start":{"line":37,"column":4},"end":{"line":37,"column":18}},"24":{"start":{"line":39,"column":20},"end":{"line":39,"column":22}},"25":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"26":{"start":{"line":41,"column":4},"end":{"line":41,"column":27}},"27":{"start":{"line":43,"column":2},"end":{"line":45,"column":3}},"28":{"start":{"line":44,"column":4},"end":{"line":44,"column":29}},"29":{"start":{"line":46,"column":2},"end":{"line":48,"column":3}},"30":{"start":{"line":47,"column":4},"end":{"line":47,"column":27}},"31":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":37}},"33":{"start":{"line":52,"column":2},"end":{"line":52,"column":19}}},"fnMap":{"0":{"name":"getOldRowData","decl":{"start":{"line":2,"column":16},"end":{"line":2,"column":29}},"loc":{"start":{"line":2,"column":50},"end":{"line":30,"column":1}},"line":2},"1":{"name":"getOldColumnData","decl":{"start":{"line":31,"column":16},"end":{"line":31,"column":32}},"loc":{"start":{"line":31,"column":58},"end":{"line":53,"column":1}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":2},"end":{"line":5,"column":3}},"type":"if","locations":[{"start":{"line":3,"column":2},"end":{"line":5,"column":3}},{"start":{},"end":{}}],"line":3},"1":{"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":50}},"type":"binary-expr","locations":[{"start":{"line":3,"column":6},"end":{"line":3,"column":25}},{"start":{"line":3,"column":29},"end":{"line":3,"column":50}}],"line":3},"2":{"loc":{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},"type":"if","locations":[{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},{"start":{},"end":{}}],"line":7},"3":{"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":42}},"type":"binary-expr","locations":[{"start":{"line":7,"column":6},"end":{"line":7,"column":21}},{"start":{"line":7,"column":25},"end":{"line":7,"column":42}}],"line":7},"4":{"loc":{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},"type":"if","locations":[{"start":{"line":11,"column":2},"end":{"line":13,"column":3}},{"start":{},"end":{}}],"line":11},"5":{"loc":{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},"type":"if","locations":[{"start":{"line":14,"column":2},"end":{"line":16,"column":3}},{"start":{},"end":{}}],"line":14},"6":{"loc":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},{"start":{},"end":{}}],"line":17},"7":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{},"end":{}}],"line":20},"8":{"loc":{"start":{"line":23,"column":2},"end":{"line":25,"column":3}},"type":"if","locations":[{"start":{"line":23,"column":2},"end":{"line":25,"column":3}},{"start":{},"end":{}}],"line":23},"9":{"loc":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},{"start":{},"end":{}}],"line":26},"10":{"loc":{"start":{"line":32,"column":2},"end":{"line":34,"column":3}},"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":34,"column":3}},{"start":{},"end":{}}],"line":32},"11":{"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":54}},"type":"binary-expr","locations":[{"start":{"line":32,"column":6},"end":{"line":32,"column":27}},{"start":{"line":32,"column":31},"end":{"line":32,"column":54}}],"line":32},"12":{"loc":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"type":"if","locations":[{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},{"start":{},"end":{}}],"line":36},"13":{"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":48}},"type":"binary-expr","locations":[{"start":{"line":36,"column":6},"end":{"line":36,"column":24}},{"start":{"line":36,"column":28},"end":{"line":36,"column":48}}],"line":36},"14":{"loc":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},{"start":{},"end":{}}],"line":40},"15":{"loc":{"start":{"line":43,"column":2},"end":{"line":45,"column":3}},"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":45,"column":3}},{"start":{},"end":{}}],"line":43},"16":{"loc":{"start":{"line":46,"column":2},"end":{"line":48,"column":3}},"type":"if","locations":[{"start":{"line":46,"column":2},"end":{"line":48,"column":3}},{"start":{},"end":{}}],"line":46},"17":{"loc":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"type":"if","locations":[{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},{"start":{},"end":{}}],"line":49}},"s":{"0":7,"1":2,"2":5,"3":5,"4":2,"5":3,"6":3,"7":2,"8":3,"9":1,"10":3,"11":1,"12":3,"13":0,"14":3,"15":0,"16":3,"17":1,"18":3,"19":7,"20":2,"21":5,"22":5,"23":2,"24":3,"25":3,"26":2,"27":3,"28":1,"29":3,"30":0,"31":3,"32":1,"33":3},"f":{"0":7,"1":7},"b":{"0":[2,5],"1":[7,6],"2":[2,3],"3":[5,4],"4":[2,1],"5":[1,2],"6":[1,2],"7":[0,3],"8":[0,3],"9":[1,2],"10":[2,5],"11":[7,6],"12":[2,3],"13":[5,4],"14":[2,1],"15":[1,2],"16":[0,3],"17":[1,2]},"inputSourceMap":{"version":3,"sources":["/Users/zhongjiafeng/Desktop/5000_Project/github/githubuniver/univer/packages/sheets/src/basics/row-column-value.ts"],"sourcesContent":["/**\n * Copyright 2023-present DreamNum Co., Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { IColumnData, IRowData, Nullable } from '@univerjs/core';\nimport { Tools } from '@univerjs/core';\n\n/**\n * Reset the row data to undefined when undoing the operation\n * @param currentRow\n * @returns\n */\nexport function getOldRowData(currentRow: Nullable<Partial<IRowData>>, newRow: Nullable<Partial<IRowData>>): Nullable<Partial<IRowData>> {\n    if (currentRow === null || currentRow === undefined) {\n        return currentRow;\n    }\n\n    const row = Tools.deepClone(currentRow);\n\n    if (newRow === null || newRow === undefined) {\n        return row;\n    }\n\n    const oldRow: Partial<IRowData> = {};\n\n    // Restore only changed properties\n    if ('h' in newRow) {\n        oldRow.h = row.h;\n    }\n\n    if ('ia' in newRow) {\n        oldRow.ia = row.ia;\n    }\n\n    if ('ah' in newRow) {\n        oldRow.ah = row.ah;\n    }\n\n    if ('hd' in newRow) {\n        oldRow.hd = row.hd;\n    }\n\n    if ('s' in newRow) {\n        oldRow.s = row.s;\n    }\n\n    if ('custom' in newRow) {\n        oldRow.custom = row.custom;\n    }\n\n    return oldRow;\n}\n\n/**\n * Reset the column data to undefined when undoing the operation\n * @param currenColumn\n * @param newColumn\n * @returns\n */\nexport function getOldColumnData(currenColumn: Nullable<Partial<IColumnData>>, newColumn: Nullable<Partial<IColumnData>>): Nullable<Partial<IColumnData>> {\n    if (currenColumn === null || currenColumn === undefined) {\n        return currenColumn;\n    }\n\n    const column = Tools.deepClone(currenColumn);\n\n    if (newColumn === null || newColumn === undefined) {\n        return column;\n    }\n\n    const oldColumn: Partial<IColumnData> = {};\n\n    // Restore only changed properties\n    if ('w' in newColumn) {\n        oldColumn.w = column.w;\n    }\n\n    if ('hd' in newColumn) {\n        oldColumn.hd = column.hd;\n    }\n\n    if ('s' in newColumn) {\n        oldColumn.s = column.s;\n    }\n\n    if ('custom' in newColumn) {\n        oldColumn.custom = column.custom;\n    }\n\n    return oldColumn;\n}\n"],"mappings":"AAiBA,SAAS,aAAa;AAOf,gBAAS,cAAc,YAAyC,QAAkE;AACrI,MAAI,eAAe,QAAQ,eAAe,QAAW;AACjD,WAAO;AAAA,EACX;AAEA,QAAM,MAAM,MAAM,UAAU,UAAU;AAEtC,MAAI,WAAW,QAAQ,WAAW,QAAW;AACzC,WAAO;AAAA,EACX;AAEA,QAAM,SAA4B,CAAC;AAGnC,MAAI,OAAO,QAAQ;AACf,WAAO,IAAI,IAAI;AAAA,EACnB;AAEA,MAAI,QAAQ,QAAQ;AAChB,WAAO,KAAK,IAAI;AAAA,EACpB;AAEA,MAAI,QAAQ,QAAQ;AAChB,WAAO,KAAK,IAAI;AAAA,EACpB;AAEA,MAAI,QAAQ,QAAQ;AAChB,WAAO,KAAK,IAAI;AAAA,EACpB;AAEA,MAAI,OAAO,QAAQ;AACf,WAAO,IAAI,IAAI;AAAA,EACnB;AAEA,MAAI,YAAY,QAAQ;AACpB,WAAO,SAAS,IAAI;AAAA,EACxB;AAEA,SAAO;AACX;AAQO,gBAAS,iBAAiB,cAA8C,WAA2E;AACtJ,MAAI,iBAAiB,QAAQ,iBAAiB,QAAW;AACrD,WAAO;AAAA,EACX;AAEA,QAAM,SAAS,MAAM,UAAU,YAAY;AAE3C,MAAI,cAAc,QAAQ,cAAc,QAAW;AAC/C,WAAO;AAAA,EACX;AAEA,QAAM,YAAkC,CAAC;AAGzC,MAAI,OAAO,WAAW;AAClB,cAAU,IAAI,OAAO;AAAA,EACzB;AAEA,MAAI,QAAQ,WAAW;AACnB,cAAU,KAAK,OAAO;AAAA,EAC1B;AAEA,MAAI,OAAO,WAAW;AAClB,cAAU,IAAI,OAAO;AAAA,EACzB;AAEA,MAAI,YAAY,WAAW;AACvB,cAAU,SAAS,OAAO;AAAA,EAC9B;AAEA,SAAO;AACX;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bbde1f91fe371c31657d898b2582ff13258aa574"}}