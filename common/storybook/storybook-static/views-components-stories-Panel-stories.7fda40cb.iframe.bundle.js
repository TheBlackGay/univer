"use strict";(self.webpackChunk_univerjs_storybook=self.webpackChunk_univerjs_storybook||[]).push([[8169],{"../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/currency/index.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".univer-options {\n  display: flex;\n  justify-content: space-between;\n}\n.univer-options .univer-w-140 {\n  width: 140px;\n}\n.univer-options .univer-w-120 {\n  width: 120px;\n}\n","",{version:3,sources:["webpack://./../../packages/sheets-numfmt-ui/src/views/components/currency/index.less"],names:[],mappings:"AAAA;EACI,aAAA;EACA,8BAAA;AACJ;AAHA;EAKQ,YAAA;AACR;AANA;EASQ,YAAA;AAAR",sourcesContent:[".options {\n    display: flex;\n    justify-content: space-between;\n\n    .w-140 {\n        width: 140px;\n    }\n\n    .w-120 {\n        width: 120px;\n    }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={options:"univer-options",w140:"univer-w-140",w120:"univer-w-120"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/custom-format/index.module.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".univer-custom-format-title {\n  margin-top: 16px;\n}\n.univer-custom-format-input {\n  margin-top: 8px;\n  width: 100%;\n}\n.univer-custom-format-history-list {\n  margin-top: 8px;\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid var(---Grey-200, #e5e5e5);\n  max-height: 400px;\n  overflow: scroll;\n}\n.univer-custom-format-history-list-item {\n  padding: 6px 0px;\n  display: flex;\n  gap: 6px;\n  align-items: center;\n  cursor: pointer;\n}\n.univer-custom-format-history-list-item-icon-wrap {\n  width: 16px;\n  display: flex;\n  align-items: center;\n  color: #274fee;\n}\n.univer-custom-format-des {\n  margin-top: 8px;\n  color: var(---Grey-600, #7a7a7a);\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 16px;\n}\n","",{version:3,sources:["webpack://./../../packages/sheets-numfmt-ui/src/views/components/custom-format/index.module.less"],names:[],mappings:"AACI;EACI,gBAAA;AAAR;AAGI;EACI,eAAA;EACA,WAAA;AADR;AAII;EACI,eAAA;EACA,YAAA;EACA,kBAAA;EACA,2CAAA;EACA,iBAAA;EACA,gBAAA;AAFR;AAGQ;EACI,gBAAA;EACA,aAAA;EACA,QAAA;EACA,mBAAA;EACA,eAAA;AADZ;AAEY;EACI,WAAA;EACA,aAAA;EACA,mBAAA;EACA,cAAA;AAAhB;AAKI;EACI,eAAA;EACA,gCAAA;EACA,eAAA;EACA,kBAAA;EACA,gBAAA;EACA,iBAAA;AAHR",sourcesContent:[".custom-format {\n    &-title {\n        margin-top: 16px;\n    }\n\n    &-input {\n        margin-top: 8px;\n        width: 100%;\n    }\n\n    &-history-list {\n        margin-top: 8px;\n        padding: 8px;\n        border-radius: 8px;\n        border: 1px solid var(---Grey-200, #e5e5e5);\n        max-height: 400px;\n        overflow: scroll;\n        &-item {\n            padding: 6px 0px;\n            display: flex;\n            gap: 6px;\n            align-items: center;\n            cursor: pointer;\n            &-icon-wrap {\n                width: 16px;\n                display: flex;\n                align-items: center;\n                color: #274fee;\n            }\n        }\n    }\n\n    &-des {\n        margin-top: 8px;\n        color: var(---Grey-600, #7a7a7a);\n        font-size: 12px;\n        font-style: normal;\n        font-weight: 400;\n        line-height: 16px;\n    }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={customFormatTitle:"univer-custom-format-title",customFormatInput:"univer-custom-format-input",customFormatHistoryList:"univer-custom-format-history-list",customFormatHistoryListItem:"univer-custom-format-history-list-item",customFormatHistoryListItemIconWrap:"univer-custom-format-history-list-item-icon-wrap",customFormatDes:"univer-custom-format-des"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/index.less":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_7_1_2_webpack_5_98_0_swc_core_1_10_18_esbuild_0_25_0_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".univer-numfmt-panel {\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n}\n.univer-numfmt-panel .univer-group-title {\n  font-size: 16px;\n  color: rgba(var(--color-black));\n}\n.univer-numfmt-panel .univer-label {\n  font-size: 15px;\n  color: rgba(var(--grey-400));\n}\n.univer-numfmt-panel .univer-describe {\n  font-size: 13px;\n  line-height: 20px;\n  color: rgba(var(--grey-600));\n}\n.univer-numfmt-panel .univer-preview {\n  height: 36px;\n  padding: 0 16px;\n  font-size: 14px;\n  line-height: 36px;\n  color: var(--color-black);\n  border: 1px solid rgb(var(--grey-200));\n  border-radius: 4px;\n}\n.univer-numfmt-panel .univer-btn-list {\n  display: flex;\n  justify-content: flex-end;\n}\n.univer-numfmt-panel .univer-m-r-12 {\n  margin-right: 12px;\n}\n.univer-numfmt-panel .univer-m-t-16 {\n  margin-top: 16px;\n}\n.univer-numfmt-panel .univer-m-t-14 {\n  margin-top: 14px;\n}\n.univer-numfmt-panel .univer-m-t-8 {\n  margin-top: 8px;\n}\n.univer-numfmt-panel .univer-m-b-20 {\n  margin-bottom: 20px;\n}\n","",{version:3,sources:["webpack://./../../packages/sheets-numfmt-ui/src/views/components/index.less"],names:[],mappings:"AAAA;EACI,gBAAA;EACA,aAAA;EACA,sBAAA;EACA,8BAAA;EAEA,YAAA;AAAJ;AANA;EASQ,eAAA;EACA,+BAAA;AAAR;AAVA;EAcQ,eAAA;EACA,4BAAA;AADR;AAdA;EAmBQ,eAAA;EACA,iBAAA;EACA,4BAAA;AAFR;AAnBA;EAyBQ,YAAA;EACA,eAAA;EAEA,eAAA;EACA,iBAAA;EACA,yBAAA;EAEA,sCAAA;EACA,kBAAA;AALR;AA5BA;EAqCQ,aAAA;EACA,yBAAA;AANR;AAhCA;EA0CQ,kBAAA;AAPR;AAnCA;EA8CQ,gBAAA;AARR;AAtCA;EAkDQ,gBAAA;AATR;AAzCA;EAsDQ,eAAA;AAVR;AA5CA;EA0DQ,mBAAA;AAXR",sourcesContent:[".numfmt-panel {\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n\n    height: 100%;\n\n    .group-title {\n        font-size: 16px;\n        color: rgba(var(--color-black));\n    }\n\n    .label {\n        font-size: 15px;\n        color: rgba(var(--grey-400));\n    }\n\n    .describe {\n        font-size: 13px;\n        line-height: 20px;\n        color: rgba(var(--grey-600));\n    }\n\n    .preview {\n        height: 36px;\n        padding: 0 16px;\n\n        font-size: 14px;\n        line-height: 36px;\n        color: var(--color-black);\n\n        border: 1px solid rgb(var(--grey-200));\n        border-radius: 4px;\n    }\n\n    .btn-list {\n        display: flex;\n        justify-content: flex-end;\n    }\n\n    .m-r-12 {\n        margin-right: 12px;\n    }\n\n    .m-t-16 {\n        margin-top: 16px;\n    }\n\n    .m-t-14 {\n        margin-top: 14px;\n    }\n\n    .m-t-8 {\n        margin-top: 8px;\n    }\n\n    .m-b-20 {\n        margin-bottom: 20px;\n    }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={numfmtPanel:"univer-numfmt-panel",groupTitle:"univer-group-title",label:"univer-label",describe:"univer-describe",preview:"univer-preview",btnList:"univer-btn-list",mR12:"univer-m-r-12",mT16:"univer-m-t-16",mT14:"univer-m-t-14",mT8:"univer-m-t-8",mB20:"univer-m-b-20"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"../../packages/sheets-numfmt-ui/src/views/components/stories/Panel.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Test:()=>Test,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Panel_stories});var jsx_runtime=__webpack_require__("../../node_modules/.pnpm/react@19.0.0/node_modules/react/jsx-runtime.js"),src=__webpack_require__("../../packages/core/src/index.ts"),ui_src=__webpack_require__("../../packages/ui/src/index.ts"),react=__webpack_require__("../../node_modules/.pnpm/react@19.0.0/node_modules/react/index.js");function _ts_metadata(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)}const UserHabitCurrencyContext=(0,react.createContext)([]);class UserHabitController{constructor(_localStorageService){this._localStorageService=_localStorageService}_getKey(habit){return`userHabitController_${habit}`}async addHabit(habit,initValue){const key=this._getKey(habit);return this._localStorageService.getItem(key).then((item=>{item||this._localStorageService.setItem(key,initValue)}))}markHabit(habit,value){const key=this._getKey(habit);this._localStorageService.getItem(key).then((list=>{if(list){const index=list.findIndex((item=>item===value));index>-1&&list.splice(index,1),list.unshift(value),this._localStorageService.setItem(key,list)}}))}async getHabit(habit,sortList){const key=this._getKey(habit),result=await this._localStorageService.getItem(key);if(sortList&&result){const priority=result.map(((item,index,arr)=>({value:item,priority:arr.length-index})));return sortList.sort(((a,b)=>{const ap=priority.find((item=>item.value===a))?.priority||-1;return(priority.find((item=>item.value===b))?.priority||-1)-ap}))}return result||[]}deleteHabit(habit){this._localStorageService.removeItem(habit)}}UserHabitController=function _ts_decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([function _ts_param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}(0,(0,src.y_5)(src.zIu)),_ts_metadata("design:type",Function),_ts_metadata("design:paramtypes",[void 0===src.zIu?Object:src.zIu])],UserHabitController);const en_US={sheet:{numfmt:{percent:"Percentage",title:"Number format",numfmtType:"Format types",cancel:"Cancel",confirm:"Confirm",general:"General",accounting:"Accounting",text:"Text",number:"Number",currency:"Currency",date:"Date",time:"Time",thousandthPercentile:"Thousands separator",preview:"Preview",dateTime:"Date and time",decimalLength:"Decimal places",currencyType:"Currency Symbol",moreFmt:"Formats",financialValue:"Financial value",roundingCurrency:"Rounding up the currency",timeDuration:"Duration Time",currencyDes:"The currency format is used to represent general currency values. The accounting format aligns a column of values with decimal points",accountingDes:"The accounting number format aligns a column of values with currency symbols and decimal points",dateType:"Date Type",dateDes:"The date format presents date and time series values as date values.",negType:"A negative number type",generalDes:"The regular format does not contain any specific number format.",thousandthPercentileDes:"The percentile format is used for the representation of ordinary numbers. Monetary and accounting formats provide a specialized format for monetary value calculations.",addDecimal:"Increase decimal places",subtractDecimal:"Decreasing decimal places",customFormat:"Custom Format",customFormatDes:"Generate custom number formats based on existing formats."}}},ru_RU={sheet:{numfmt:{percent:"Процент",title:"Формат числа",numfmtType:"Типы форматов",cancel:"Отмена",confirm:"Подтвердить",general:"Общий",accounting:"Бухгалтерский",text:"Текст",number:"Число",currency:"Валюта",date:"Дата",time:"Время",thousandthPercentile:"Разделитель тысяч",preview:"Предпросмотр",dateTime:"Дата и время",decimalLength:"Десятичные знаки",currencyType:"Символ валюты",moreFmt:"Другие форматы",financialValue:"Финансовое значение",roundingCurrency:"Округление валюты",timeDuration:"Продолжительность времени",currencyDes:"Формат валюты используется для представления общих значений валюты. Формат бухгалтерского учета выравнивает столбец значений по десятичным точкам.",accountingDes:"Формат бухгалтерских чисел выравнивает столбец значений по символам валюты и десятичным точкам.",dateType:"Тип даты",dateDes:"Формат даты представляет значения времени и даты как значения даты.",negType:"Тип отрицательного числа",generalDes:"Обычный формат не содержит никакого специфического формата числа.",thousandthPercentileDes:"Формат процента используется для представления обычных чисел. Монетарные и бухгалтерские форматы предоставляют специальный формат для вычислений монетарных значений.",addDecimal:"Увеличить количество десятичных знаков",subtractDecimal:"Уменьшить количество десятичных знаков",customFormat:"Custom Format",customFormatDes:"Generate custom number formats based on existing formats."}}},zh_CN={sheet:{numfmt:{percent:"百分比",title:"数字格式",numfmtType:"格式类型",cancel:"取消",confirm:"确认",general:"常规",accounting:"会计",text:"文本",number:"数值",currency:"货币",date:"日期",time:"时间",thousandthPercentile:"千分位符",preview:"示例",dateTime:"日期时间",decimalLength:"小数位数",currencyType:"货币类型",moreFmt:"更多格式",financialValue:"财务数值",roundingCurrency:"货币取整",timeDuration:"持续时间",currencyDes:"货币格式用于表示一般货币数值。会计格式可以对一列数值进行小数点对齐",accountingDes:"会计数字格式可对一列数值进行货币符号和小数点对齐",dateType:"日期类型",dateDes:"日期格式将日期和时间系列数值品示为日期值。",negType:"负数类型",generalDes:"常规格式不包含任何特定的数字格式。",thousandthPercentileDes:"千分位符格式用于一般数字的表示。货币和会计格式则提供货币值计算的专用格式。",addDecimal:"增加小数位",subtractDecimal:"减少小数位",customFormat:"自定义格式",customFormatDes:"根据现有格式生成自定义数字格式。"}}};var design_src=__webpack_require__("../../packages/design/src/index.ts");const currency_symbols_currencySymbols=["$","£","¥","¤","֏","؋","৳","฿","₡","₦","₩","₪","₫","€","₭","₮","₱","₲","₴","₸","₹","₺","₼","₽","₾","₿"],countryCurrencyMap={US:"$",CA:"C$",GB:"£",JP:"¥",IN:"₹",AU:"A$",CN:"¥",KR:"₩",RU:"₽",AT:"€",BE:"€",CY:"€",EE:"€",FI:"€",FR:"€",DE:"€",GR:"€",IE:"€",IT:"€",LV:"€",LT:"€",LU:"€",MT:"€",NL:"€",PT:"€",SK:"€",SI:"€",ES:"€"},DATEFMTLISG=[{label:"1930-08-05",suffix:"yyyy-MM-dd"},{label:"1930/08/05",suffix:"yyyy/MM/dd"},{label:"1930年08月05日",suffix:'yyyy"年"MM"月"dd"日"'},{label:"08-05",suffix:"MM-dd"},{label:"8月5日",suffix:'M"月"d"日"'},{label:"13:30:30",suffix:"h:mm:ss"},{label:"13:30",suffix:"h:mm"},{label:"下午01:30",suffix:"A/P hh:mm"},{label:"下午1:30",suffix:"A/P h:mm"},{label:"下午1:30:30",suffix:"A/P h:mm:ss"},{label:"08-05 下午 01:30",suffix:"MM-dd A/P hh:mm"}],NUMBERFORMAT=[{label:"(1,235)",suffix:"#,##0_);(#,##0)"},{label:"(1,235) ",suffix:"#,##0_);[Red](#,##0)",color:"red"},{label:"1,234.56",suffix:"#,##0.00_);#,##0.00"},{label:"1,234.56",suffix:"#,##0.00_);[Red]#,##0.00",color:"red"},{label:"-1,234.56",suffix:"#,##0.00_);-#,##0.00"},{label:"-1,234.56",suffix:"#,##0.00_);[Red]-#,##0.00",color:"red"}],CURRENCYFORMAT=[{label:suffix=>`${suffix}1,235`,suffix:suffix=>`"${suffix}"#,##0.00_);"${suffix}"#,##0.00`},{label:suffix=>`${suffix}1,235`,suffix:suffix=>`"${suffix}"#,##0.00_);[Red]"${suffix}"#,##0.00`,color:"red"},{label:suffix=>`(${suffix}1,235)`,suffix:suffix=>`"${suffix}"#,##0.00_);("${suffix}"#,##0.00)`},{label:suffix=>`(${suffix}1,235)`,suffix:suffix=>`"${suffix}"#,##0.00_);[Red]("${suffix}"#,##0.00)`,color:"red"},{label:suffix=>`-${suffix}1,235`,suffix:suffix=>`"${suffix}"#,##0.00_);-"${suffix}"#,##0.00`},{label:suffix=>`-${suffix}1,235`,suffix:suffix=>`"${suffix}"#,##0.00_);[Red]-"${suffix}"#,##0.00`,color:"red"}];var sheets_src=__webpack_require__("../../packages/sheets/src/index.ts");const getDecimalFromPattern=(pattern,defaultValue=0)=>{if(!pattern)return defaultValue;return src.gIL.getInfo(pattern).maxDecimals??defaultValue},isPatternEqualWithoutDecimal=(patternA,patternB)=>{if(patternA&&!patternB||!patternA&&patternB)return!1;const getString=tokens=>tokens.reduce(((pre,cur)=>{if(pre.isEnd)return pre;const str=cur.value||cur.num;return"point"===cur.type?(pre.isEnd=!0,pre):{...pre,result:pre.result+str}}),{isEnd:!1,result:""}).result,partitionsA=src.gIL.getInfo(patternA)._partitions,partitionsB=src.gIL.getInfo(patternB)._partitions,A1=getString(partitionsA[0].tokens),B1=getString(partitionsB[0].tokens),A2=getString(partitionsA[1].tokens),B2=getString(partitionsB[1].tokens);return A1===B1&&A2===B2&&partitionsA[1].color===partitionsB[1].color},getDecimalString=length=>new Array(Math.min(Math.max(0,Number(length)),30)).fill(0).join(""),setPatternDecimal=(patterns,decimalLength)=>patterns.split(";").map((pattern=>/\.0?/.test(pattern)?pattern.replace(/\.0*/g,`${decimalLength>0?".":""}${getDecimalString(Number(decimalLength||0))}`):/0([^0]?)|0$/.test(pattern)?pattern.replace(/0([^0]+)|0$/,`0${decimalLength>0?".":""}${getDecimalString(Number(decimalLength||0))}$1`):pattern)).join(";");var util=__webpack_require__("../../packages/engine-numfmt/src/util.ts");const SetNumfmtCommand={id:"sheet.command.numfmt.set.numfmt",type:src.g4t.COMMAND,handler:(accessor,params)=>{if(!params)return!1;const commandService=accessor.get(src.wTY),univerInstanceService=accessor.get(src.HCr),undoRedoService=accessor.get(src.$Dz),target=(0,sheets_src.go2)(univerInstanceService,params);if(!target)return!1;const{unitId,subUnitId,worksheet}=target,setCells=params.values.filter((value=>!!value.pattern)),removeCells=params.values.filter((value=>!value.pattern)),setRedos=(0,sheets_src.wOQ)(unitId,subUnitId,setCells),removeRedos={unitId,subUnitId,ranges:removeCells.map((cell=>({startColumn:cell.col,startRow:cell.row,endColumn:cell.col,endRow:cell.row})))},redos=[],undos=[];if(setCells.length){const setCellTypeObj=setCells.reduce(((pre,cur)=>{(0,util.Z)(cur.pattern)&&pre.setValue(cur.row,cur.col,{t:src.scd.STRING});const cell=worksheet.getCellRaw(cur.row,cur.col);if(cell){const type=(0,sheets_src.u6j)(cell.v);type!==cell.t&&pre.setValue(cur.row,cur.col,{t:type})}return pre}),new src.hDc).getMatrix(),undoSetCellTypeObj=new src.hDc;new src.hDc(setCellTypeObj).forValue(((row,col)=>{const cell=worksheet.getCellRaw(row,col);cell?undoSetCellTypeObj.setValue(row,col,{t:cell.t}):undoSetCellTypeObj.setValue(row,col,{t:void 0})})),Object.keys(setRedos.values).forEach((key=>{const v=setRedos.values[key];v.ranges=(0,sheets_src.yzp)(v.ranges)})),redos.push({id:sheets_src.dD6.id,params:setRedos});const undo=(0,sheets_src.lqf)(accessor,setRedos);undos.push(...undo)}if(removeCells.length){removeRedos.ranges=(0,sheets_src.yzp)(removeRedos.ranges);const setCellTypeObj=removeCells.reduce(((pre,cur)=>{const cell=worksheet.getCellRaw(cur.row,cur.col);if(cell){const type=(0,sheets_src.u6j)(cell.v);type!==cell.t&&pre.setValue(cur.row,cur.col,{t:type})}return pre}),new src.hDc).getMatrix(),undoSetCellTypeObj=new src.hDc;new src.hDc(setCellTypeObj).forValue(((row,col)=>{const cell=worksheet.getCellRaw(row,col);cell?undoSetCellTypeObj.setValue(row,col,{t:cell.t}):undoSetCellTypeObj.setValue(row,col,{t:void 0})})),redos.push({id:sheets_src.J2H.id,params:removeRedos},{id:sheets_src.N48.id,params:{unitId,subUnitId,cellValue:setCellTypeObj}});const undo=(0,sheets_src.xNO)(accessor,removeRedos);undos.push({id:sheets_src.N48.id,params:{unitId,subUnitId,cellValue:undoSetCellTypeObj.getMatrix()}},...undo)}const result=(0,src.PkI)(redos,commandService).result;return result&&undoRedoService.pushUndoRedo({unitID:unitId,undoMutations:undos,redoMutations:redos}),result}},AddDecimalCommand={id:"sheet.command.numfmt.add.decimal.command",type:src.g4t.COMMAND,handler:async accessor=>{const commandService=accessor.get(src.wTY),selectionManagerService=accessor.get(sheets_src.Fal),numfmtService=accessor.get(sheets_src.C$8),univerInstanceService=accessor.get(src.HCr),selections=selectionManagerService.getCurrentSelections();if(!selections||!selections.length)return!1;const target=(0,sheets_src.go2)(univerInstanceService);if(!target)return!1;const{unitId,subUnitId}=target;let maxDecimals=0;selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{const numfmtValue=numfmtService.getValue(unitId,subUnitId,row,col);if(!numfmtValue){const cell=target.worksheet.getCellRaw(row,col);if(!maxDecimals&&cell&&cell.t===src.scd.NUMBER&&cell.v){const regResult=/\.(\d*)$/.exec(String(cell.v));if(regResult){const length=regResult[1].length;if(!length)return;maxDecimals=Math.max(maxDecimals,length)}}return}const decimals=getDecimalFromPattern(numfmtValue.pattern);maxDecimals=decimals>maxDecimals?decimals:maxDecimals}))}));const decimals=maxDecimals+1,defaultPattern=setPatternDecimal("0"+(decimals>0?".0":""),decimals),values=[];if(selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{const numfmtValue=numfmtService.getValue(unitId,subUnitId,row,col);if(numfmtValue){const decimals=getDecimalFromPattern(numfmtValue.pattern),pattern=setPatternDecimal(numfmtValue.pattern,decimals+1);pattern!==numfmtValue.pattern&&values.push({row,col,pattern})}else values.push({row,col,pattern:defaultPattern})}))})),values.length){return await commandService.executeCommand(SetNumfmtCommand.id,{values})}return!1}};var BehaviorSubject=__webpack_require__("../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");class MenuCurrencyService{setCurrencySymbolByCountryCode(symbol){this._currencySymbol$.next(symbol)}getCurrencySymbol(){return this._currencySymbol$.getValue()}constructor(){this._currencySymbol$=new BehaviorSubject.t("US"),this.currencySymbol$=this._currencySymbol$.asObservable()}}const SetCurrencyCommand={id:"sheet.command.numfmt.set.currency",type:src.g4t.COMMAND,handler:async accessor=>{const commandService=accessor.get(src.wTY),selectionManagerService=accessor.get(sheets_src.Fal),menuCurrencyService=accessor.get(MenuCurrencyService),symbol=countryCurrencyMap[menuCurrencyService.getCurrencySymbol()]||"$",selections=selectionManagerService.getCurrentSelections();if(!selections||!selections.length)return!1;const values=[],suffix=CURRENCYFORMAT[4].suffix(symbol);selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{values.push({row,col,pattern:suffix,type:"currency"})}))}));return await commandService.executeCommand(SetNumfmtCommand.id,{values})}},SetPercentCommand={id:"sheet.command.numfmt.set.percent",type:src.g4t.COMMAND,handler:async accessor=>{const commandService=accessor.get(src.wTY),selections=accessor.get(sheets_src.Fal).getCurrentSelections();if(!selections||!selections.length)return!1;const values=[];selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{values.push({row,col,pattern:"0%",type:"percent"})}))}));return await commandService.executeCommand(SetNumfmtCommand.id,{values})}},SubtractDecimalCommand={id:"sheet.command.numfmt.subtract.decimal.command",type:src.g4t.COMMAND,handler:async accessor=>{const commandService=accessor.get(src.wTY),selectionManagerService=accessor.get(sheets_src.Fal),numfmtService=accessor.get(sheets_src.C$8),univerInstanceService=accessor.get(src.HCr),selections=selectionManagerService.getCurrentSelections();if(!selections||!selections.length)return!1;const target=(0,sheets_src.go2)(univerInstanceService);if(!target)return!1;const{unitId,subUnitId}=target;let maxDecimals=0;selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{const numfmtValue=numfmtService.getValue(unitId,subUnitId,row,col);if(!numfmtValue){const cell=target.worksheet.getCellRaw(row,col);if(!maxDecimals&&cell&&cell.t===src.scd.NUMBER&&cell.v){const regResult=/\.(\d*)$/.exec(String(cell.v));if(regResult){const length=regResult[1].length;if(!length)return;maxDecimals=Math.max(maxDecimals,length)}}return}const decimals=getDecimalFromPattern(numfmtValue.pattern);maxDecimals=decimals>maxDecimals?decimals:maxDecimals}))}));const decimals=maxDecimals-1,defaultPattern=setPatternDecimal("0"+(decimals>0?".0":"."),decimals),values=[];selections.forEach((selection=>{src.Q6t.foreach(selection.range,((row,col)=>{const numfmtValue=numfmtService.getValue(unitId,subUnitId,row,col);if(numfmtValue){const decimals=getDecimalFromPattern(numfmtValue.pattern);values.push({row,col,pattern:setPatternDecimal(numfmtValue.pattern,decimals-1)})}else values.push({row,col,pattern:defaultPattern})}))}));return await commandService.executeCommand(SetNumfmtCommand.id,{values})}};var merge=__webpack_require__("../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),switchMap=__webpack_require__("../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),of=__webpack_require__("../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/of.js"),skip=__webpack_require__("../../node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/skip.js"),engine_formula_src=__webpack_require__("../../packages/engine-formula/src/index.ts");const getPatternPreviewIgnoreGeneral=(pattern,value,locale)=>"General"===pattern?{result:String((0,engine_formula_src.d9)(value))}:((pattern,value,locale="en")=>{const negInfo=src.gIL.getInfo(pattern)._partitions[1],result=src.gIL.format(pattern,value,{locale,throws:!1});return value<0?{result,color:negInfo.color}:{result}})(pattern,value,locale);function numfmt_cell_content_controller_ts_metadata(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)}function numfmt_cell_content_controller_ts_param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}const TEXT_FORMAT_MARK={tl:{size:6,color:"#409f11"}};class SheetsNumfmtCellContentController extends src.jGt{constructor(_instanceService,_sheetInterceptorService,_themeService,_commandService,_numfmtService,_localeService){super(),this._instanceService=_instanceService,this._sheetInterceptorService=_sheetInterceptorService,this._themeService=_themeService,this._commandService=_commandService,this._numfmtService=_numfmtService,this._localeService=_localeService,this._local$=new BehaviorSubject.t("en"),this.local$=this._local$.asObservable(),this._initInterceptorCellContent()}get local(){const _local=this._local$.getValue();if(_local)return _local;switch(this._localeService.getCurrentLocale()){case src.VnV.FR_FR:return"fr";case src.VnV.RU_RU:return"ru";case src.VnV.VI_VN:return"vi";case src.VnV.ZH_CN:return"zh-CN";case src.VnV.ZH_TW:return"zh-TW";case src.VnV.EN_US:case src.VnV.FA_IR:default:return"en"}}_initInterceptorCellContent(){const renderCache=new src.hDc;this.disposeWithMe((0,merge.h)(this._local$,this._localeService.currentLocale$).subscribe((()=>{renderCache.reset()}))),this.disposeWithMe(this._sheetInterceptorService.intercept(sheets_src.ZoP.CELL_CONTENT,{effect:src._w8.Value|src._w8.Style,handler:(cell,location,next)=>{const unitId=location.unitId,sheetId=location.subUnitId;let numfmtValue;const originCellValue=cell;if(!originCellValue)return next(cell);if(cell?.s){const style=location.workbook.getStyles().get(cell.s);style?.n&&(numfmtValue=style.n)}if(numfmtValue||(numfmtValue=this._numfmtService.getValue(unitId,sheetId,location.row,location.col)),!numfmtValue)return next(cell);if((0,sheets_src.u6j)(originCellValue.v)!==src.scd.NUMBER)return next(cell);if((0,util.Z)(numfmtValue.pattern))return next({...cell,t:src.scd.STRING,markers:{...cell?.markers,...TEXT_FORMAT_MARK}});let numfmtRes="";const cache=renderCache.getValue(location.row,location.col);if(cache&&cache.parameters===`${originCellValue.v}_${numfmtValue.pattern}`)return next({...cell,...cache.result});const info=getPatternPreviewIgnoreGeneral(numfmtValue.pattern,Number(originCellValue.v),this.local);if(numfmtRes=info.result,!numfmtRes)return next(cell);const res={v:numfmtRes,t:src.scd.NUMBER};if(info.color){const color=this._themeService.getCurrentTheme()[`${info.color}500`];color&&(res.interceptorStyle={cl:{rgb:color}})}return renderCache.setValue(location.row,location.col,{result:res,parameters:`${originCellValue.v}_${numfmtValue.pattern}`}),next({...cell,...res})},priority:sheets_src.cym.NUMFMT})),this.disposeWithMe(this._commandService.onCommandExecuted((commandInfo=>{if(commandInfo.id===sheets_src.dD6.id){const params=commandInfo.params;Object.keys(params.values).forEach((key=>{params.values[key].ranges.forEach((range=>{src.Q6t.foreach(range,((row,col)=>{renderCache.realDeleteValue(row,col)}))}))}))}else if(commandInfo.id===sheets_src.N48.id){const params=commandInfo.params;new src.hDc(params.cellValue).forValue(((row,col)=>{renderCache.realDeleteValue(row,col)}))}}))),this.disposeWithMe(this._instanceService.getCurrentTypeOfUnit$(src.Zy$.UNIVER_SHEET).pipe((0,switchMap.n)((workbook=>workbook?.activeSheet$??(0,of.of)(null))),(0,skip.i)(1)).subscribe((()=>renderCache.reset())))}setNumfmtLocal(local){this._local$.next(local)}}SheetsNumfmtCellContentController=function numfmt_cell_content_controller_ts_decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([numfmt_cell_content_controller_ts_param(0,src.HCr),numfmt_cell_content_controller_ts_param(1,(0,src.y_5)(sheets_src.e5R)),numfmt_cell_content_controller_ts_param(2,(0,src.y_5)(src.Fsb)),numfmt_cell_content_controller_ts_param(3,(0,src.y_5)(src.wTY)),numfmt_cell_content_controller_ts_param(4,(0,src.y_5)(sheets_src.C$8)),numfmt_cell_content_controller_ts_param(5,(0,src.y_5)(src.iH9)),numfmt_cell_content_controller_ts_metadata("design:type",Function),numfmt_cell_content_controller_ts_metadata("design:paramtypes",[void 0===src.HCr?Object:src.HCr,void 0===sheets_src.e5R?Object:sheets_src.e5R,void 0===src.Fsb?Object:src.Fsb,void 0===src.wTY?Object:src.wTY,void 0===sheets_src.C$8?Object:sheets_src.C$8,void 0===src.iH9?Object:src.iH9])],SheetsNumfmtCellContentController);class NumfmtCurrencyController extends src.jGt{setCurrencySymbolByCountryCode(symbol){this._currencySymbol$.next(symbol)}getCurrencySymbol(){return this._currencySymbol$.getValue()}constructor(...args){super(...args),this._currencySymbol$=new BehaviorSubject.t("US"),this.currencySymbol$=this._currencySymbol$.asObservable()}}function numfmt_plugin_ts_metadata(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)}function numfmt_plugin_ts_param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}class UniverSheetsNumfmtPlugin extends src.k_1{static#_=this.pluginName="SHEET_NUMFMT_PLUGIN";static#_2=this.type=src.Zy$.UNIVER_SHEET;constructor(_config=void 0,_injector,_commandService){super(),this._config=_config,this._injector=_injector,this._commandService=_commandService}onStarting(){(0,src.tMf)(this._injector,[[SheetsNumfmtCellContentController],[MenuCurrencyService],[NumfmtCurrencyController]]),(0,src.HLP)(this._injector,[[SheetsNumfmtCellContentController]])}onRendered(){(0,src.HLP)(this._injector,[[NumfmtCurrencyController]]),[AddDecimalCommand,SubtractDecimalCommand,SetCurrencyCommand,SetPercentCommand,SetNumfmtCommand].forEach((config=>{this.disposeWithMe(this._commandService.registerCommand(config))}))}}UniverSheetsNumfmtPlugin=function numfmt_plugin_ts_decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}([(0,src.dCC)(sheets_src.nDU),numfmt_plugin_ts_param(1,(0,src.y_5)(src.zZn)),numfmt_plugin_ts_param(2,src.wTY),numfmt_plugin_ts_metadata("design:type",Function),numfmt_plugin_ts_metadata("design:paramtypes",[void 0,void 0===src.zZn?Object:src.zZn,void 0===src.wTY?Object:src.wTY])],UniverSheetsNumfmtPlugin);const getCurrencyType=pattern=>currency_symbols_currencySymbols.find((code=>pattern.includes(code))),getCurrencyFormatOptions=suffix=>CURRENCYFORMAT.map((item=>({label:item.label(suffix),value:item.suffix(suffix),color:item.color}))),getDateFormatOptions=()=>DATEFMTLISG.map((item=>({label:item.label,value:item.suffix}))),getNumberFormatOptions=()=>NUMBERFORMAT.map((item=>({label:item.label,value:item.suffix,color:item.color}))),key="numfmtCurrency",useCurrencyOptions=onOptionChange=>{const userHabitController=(0,ui_src.fJ)(UserHabitController),[options,optionsSet]=(0,react.useState)(currency_symbols_currencySymbols);(0,react.useEffect)((()=>{userHabitController.addHabit("numfmtCurrency",[]).then((()=>{userHabitController.getHabit(key,[...currency_symbols_currencySymbols]).then((list=>{optionsSet(list),onOptionChange&&onOptionChange(list)}))}))}),[]);return{userHabitCurrency:options,mark:v=>{userHabitController.markHabit(key,v)}}},isAccountingPanel=pattern=>!!getCurrencyType(pattern)&&pattern.startsWith("_("),AccountingPanel=props=>{const{defaultPattern,action,onChange}=props,[decimal,decimalSet]=(0,react.useState)((()=>getDecimalFromPattern(defaultPattern||"",2))),userHabitCurrency=(0,react.useContext)(UserHabitCurrencyContext),[suffix,suffixSet]=(0,react.useState)((()=>getCurrencyType(defaultPattern)||userHabitCurrency[0])),options=(0,react.useMemo)((()=>userHabitCurrency.map((key=>({label:key,value:key})))),[]),t=(0,ui_src.fJ)(src.iH9).t;action.current=()=>setPatternDecimal(`_("${suffix}"* #,##0${decimal>0?".0":""}_)`,decimal);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"m-t-16 options",children:[(0,jsx_runtime.jsxs)("div",{className:"option",children:[(0,jsx_runtime.jsx)("div",{className:"label",children:t("sheet.numfmt.decimalLength")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8 w-120",children:(0,jsx_runtime.jsx)(design_src.YI,{value:decimal,max:20,min:0,onChange:v=>{const decimal=v||0;decimalSet(decimal),onChange(setPatternDecimal(`_("${suffix}"* #,##0${decimal>0?".0":""}_)`,decimal))}})})]}),(0,jsx_runtime.jsxs)("div",{className:"option",children:[(0,jsx_runtime.jsx)("div",{className:"label",children:t("sheet.numfmt.currencyType")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8 w-140",children:(0,jsx_runtime.jsx)(design_src.l6,{onChange:v=>{suffixSet(v),onChange(setPatternDecimal(`_("${v}"* #,##0${decimal>0?".0":""}_)`,decimal))},options,value:suffix})})]})]}),(0,jsx_runtime.jsx)("div",{className:"describe m-t-14",children:t("sheet.numfmt.accountingDes")})]})};AccountingPanel.__docgenInfo={description:"",methods:[],displayName:"AccountingPanel",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};var injectStylesIntoStyleTag=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../../node_modules/.pnpm/style-loader@4.0.0_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),currency=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/currency/index.less"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(currency.A,options);currency.A&&currency.A.locals&&currency.A.locals;const isCurrencyPanel=pattern=>!!getCurrencyType(pattern)&&!pattern.startsWith("_("),CurrencyPanel=props=>{const t=(0,ui_src.fJ)(src.iH9).t,userHabitCurrency=(0,react.useContext)(UserHabitCurrencyContext),[suffix,suffixSet]=(0,react.useState)((()=>getCurrencyType(props.defaultPattern)||userHabitCurrency[0])),[decimal,decimalSet]=(0,react.useState)((()=>getDecimalFromPattern(props.defaultPattern||"",2))),[pattern,patternSet]=(0,react.useState)((()=>{const negativeOptions=getCurrencyFormatOptions(suffix);return negativeOptions.find((item=>isPatternEqualWithoutDecimal(item.value,props.defaultPattern)))?.value||negativeOptions[0].value})),negativeOptions=(0,react.useMemo)((()=>getCurrencyFormatOptions(suffix)),[suffix]),options=(0,react.useMemo)((()=>userHabitCurrency.map((key=>({label:key,value:key})))),[userHabitCurrency]);props.action.current=()=>setPatternDecimal(pattern,decimal);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"m-t-16 options",children:[(0,jsx_runtime.jsxs)("div",{className:"option",children:[(0,jsx_runtime.jsx)("div",{className:"label",children:t("sheet.numfmt.decimalLength")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8 w-120",children:(0,jsx_runtime.jsx)(design_src.YI,{value:decimal,max:20,min:0,onChange:v=>{decimalSet(v||0),props.onChange(setPatternDecimal(pattern,v||0))}})})]}),(0,jsx_runtime.jsxs)("div",{className:"option",children:[(0,jsx_runtime.jsx)("div",{className:"label",children:t("sheet.numfmt.currencyType")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8 w-140",children:(0,jsx_runtime.jsx)(design_src.l6,{onChange:value=>{if(void 0===value)return;suffixSet(value);const pattern=getCurrencyFormatOptions(value)[0].value;patternSet(pattern),props.onChange(setPatternDecimal(pattern,decimal))},options,value:suffix})})]})]}),(0,jsx_runtime.jsx)("div",{className:"m-t-16 label",children:t("sheet.numfmt.negType")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8",children:(0,jsx_runtime.jsx)(design_src.Bq,{onChange:value=>{void 0!==value&&(patternSet(value),props.onChange(setPatternDecimal(value,decimal)))},options:negativeOptions,value:pattern})}),(0,jsx_runtime.jsx)("div",{className:"describe m-t-14",children:t("sheet.numfmt.currencyDes")})]})};CurrencyPanel.__docgenInfo={description:"",methods:[],displayName:"CurrencyPanel",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};var check_mark_single=__webpack_require__("../../node_modules/.pnpm/@univerjs+icons@0.2.22_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@univerjs/icons/esm/components/check-mark-single.js"),index_module=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/custom-format/index.module.less"),index_module_options={};index_module_options.styleTagTransform=styleTagTransform_default(),index_module_options.setAttributes=setAttributesWithoutAttributes_default(),index_module_options.insert=insertBySelector_default().bind(null,"head"),index_module_options.domAPI=styleDomAPI_default(),index_module_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(index_module.A,index_module_options);const custom_format_index_module=index_module.A&&index_module.A.locals?index_module.A.locals:void 0;function CustomFormat(props){const{defaultPattern,action,onChange}=props,userHabitController=(0,ui_src.fJ)(UserHabitController),localStorageService=(0,ui_src.fJ)(src.zIu),localeService=(0,ui_src.fJ)(src.iH9),[pattern,patternSet]=(0,react.useState)(defaultPattern);action.current=()=>(userHabitController.markHabit("customFormat",pattern),localStorageService.getItem("numfmt_custom_pattern").then(((list=[])=>{const _list=[...new Set([pattern,...list||[]])].splice(0,10).filter((e=>!!e));localStorageService.setItem("numfmt_custom_pattern",_list)})),pattern);const[options,optionsSet]=(0,react.useState)([]);(0,react.useEffect)((()=>{localStorageService.getItem("numfmt_custom_pattern").then((historyList=>{const list=[...CURRENCYFORMAT.map((item=>item.suffix("$"))),...DATEFMTLISG.map((item=>item.suffix)),...NUMBERFORMAT.map((item=>item.suffix))];list.push(...historyList||[]),userHabitController.addHabit("customFormat",[]).finally((()=>{userHabitController.getHabit("customFormat",list).then((list=>{optionsSet([...new Set(list)])}))}))}))}),[]);return(0,jsx_runtime.jsxs)("div",{className:custom_format_index_module.customFormat,children:[(0,jsx_runtime.jsx)("div",{className:custom_format_index_module.customFormatTitle,children:localeService.t("sheet.numfmt.customFormat")}),(0,jsx_runtime.jsx)(design_src.pd,{placeholder:localeService.t("sheet.numfmt.customFormat"),onBlur:()=>{onChange(pattern)},value:pattern,onChange:patternSet,className:custom_format_index_module.customFormatInput}),(0,jsx_runtime.jsx)("div",{className:custom_format_index_module.customFormatHistoryList,children:options.map((p=>(0,jsx_runtime.jsxs)("div",{onClick:()=>(p=>{patternSet(p),onChange(p)})(p),className:custom_format_index_module.customFormatHistoryListItem,children:[(0,jsx_runtime.jsx)("div",{className:custom_format_index_module.customFormatHistoryListItemIconWrap,children:pattern===p&&(0,jsx_runtime.jsx)(check_mark_single.A,{})}),(0,jsx_runtime.jsx)("div",{children:p})]},p)))}),(0,jsx_runtime.jsx)("div",{className:custom_format_index_module.customFormatDes,children:localeService.t("sheet.numfmt.customFormatDes")})]})}CustomFormat.__docgenInfo={description:"",methods:[],displayName:"CustomFormat",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};const isDatePanel=pattern=>{const info=src.gIL.getInfo(pattern);return getDateFormatOptions().map((item=>item.value)).includes(pattern)||["date","datetime","time"].includes(info.type)},DatePanel=props=>{const options=(0,react.useMemo)(getDateFormatOptions,[]),t=(0,ui_src.fJ)(src.iH9).t,[suffix,suffixSet]=(0,react.useState)((()=>{if(props.defaultPattern){const item=options.find((item=>item.value===props.defaultPattern));if(item)return item.value}return options[0].value}));props.action.current=()=>suffix;return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"m-t-16 label",children:t("sheet.numfmt.dateType")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8",children:(0,jsx_runtime.jsx)(design_src.Bq,{value:suffix,options,onChange:v=>{void 0!==v&&(suffixSet(v),props.onChange(v))}})}),(0,jsx_runtime.jsx)("div",{className:"describe m-t-14",children:t("sheet.numfmt.dateDes")})]})};DatePanel.__docgenInfo={description:"",methods:[],displayName:"DatePanel",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};const isGeneralPanel=pattern=>!pattern,GeneralPanel=props=>{const t=(0,ui_src.fJ)(src.iH9).t;return props.action.current=()=>"",(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("div",{className:"describe m-t-14",children:t("sheet.numfmt.generalDes")})})};GeneralPanel.__docgenInfo={description:"",methods:[],displayName:"GeneralPanel",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};const isThousandthPercentilePanel=pattern=>getNumberFormatOptions().some((item=>isPatternEqualWithoutDecimal(item.value,pattern))),ThousandthPercentilePanel=props=>{const localeService=(0,ui_src.fJ)(src.iH9),options=(0,react.useMemo)(getNumberFormatOptions,[]),[decimal,decimalSet]=(0,react.useState)((()=>getDecimalFromPattern(props.defaultPattern||"",0))),[suffix,suffixSet]=(0,react.useState)((()=>{const item=options.find((item=>isPatternEqualWithoutDecimal(item.value,props.defaultPattern||"")));return item?.value||options[0].value})),pattern=(0,react.useMemo)((()=>setPatternDecimal(suffix,Number(decimal||0))),[suffix,decimal]),isInputDisable=(0,react.useMemo)((()=>!(pattern=>/\.0?/.test(pattern)||/0([^0]?)|0$/.test(pattern))(suffix)),[suffix]);return props.action.current=()=>pattern,(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"m-t-16 label",children:localeService.t("sheet.numfmt.decimalLength")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8",children:(0,jsx_runtime.jsx)(design_src.YI,{disabled:isInputDisable,value:decimal,max:20,min:0,onChange:decimal=>{decimalSet(decimal||0),props.onChange(setPatternDecimal(suffix,Number(decimal||0)))}})}),(0,jsx_runtime.jsxs)("div",{className:"m-t-16 label",children:[" ",localeService.t("sheet.numfmt.negType")]}),(0,jsx_runtime.jsx)("div",{className:"m-t-8",children:(0,jsx_runtime.jsx)(design_src.Bq,{onChange:v=>{void 0!==v&&(decimalSet(getDecimalFromPattern(v,0)),suffixSet(v),props.onChange(v))},options,value:suffix})}),(0,jsx_runtime.jsx)("div",{className:"describe m-t-14",children:localeService.t("sheet.numfmt.thousandthPercentileDes")})]})};ThousandthPercentilePanel.__docgenInfo={description:"",methods:[],displayName:"ThousandthPercentilePanel",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(result: string) => void",signature:{arguments:[{type:{name:"string"},name:"result"}],return:{name:"void"}}},description:""},defaultValue:{required:!0,tsType:{name:"number"},description:""},defaultPattern:{required:!0,tsType:{name:"string"},description:""},action:{required:!0,tsType:{name:"MutableRefObject",elements:[{name:"signature",type:"function",raw:"() => string | null",signature:{arguments:[],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}}],raw:"MutableRefObject<() => string | null>"},description:""}}};var components=__webpack_require__("../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!../../node_modules/.pnpm/less-loader@12.2.0_less@4.2.2_webpack@5.98.0_@swc+core@1.10.18_esbuild@0.25.0_/node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[14].use[2]!../../packages/sheets-numfmt-ui/src/views/components/index.less"),components_options={};components_options.styleTagTransform=styleTagTransform_default(),components_options.setAttributes=setAttributesWithoutAttributes_default(),components_options.insert=insertBySelector_default().bind(null,"head"),components_options.domAPI=styleDomAPI_default(),components_options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(components.A,components_options);components.A&&components.A.locals&&components.A.locals;const SheetNumfmtPanel=props=>{const{defaultValue,defaultPattern,row,col}=props.value,localeService=(0,ui_src.fJ)(src.iH9),getCurrentPattern=(0,react.useRef)((()=>"")),t=localeService.t,nextTick=(()=>{const effectList=(0,react.useRef)([]),[value,dispatch]=(0,react.useState)({});return(0,react.useEffect)((()=>{effectList.current.forEach((fn=>{fn()})),effectList.current=[]}),[value]),fn=>{effectList.current.push(fn),dispatch({})}})(),typeOptions=(0,react.useMemo)((()=>[{label:"sheet.numfmt.general",component:GeneralPanel},{label:"sheet.numfmt.accounting",component:AccountingPanel},{label:"sheet.numfmt.currency",component:CurrencyPanel},{label:"sheet.numfmt.date",component:DatePanel},{label:"sheet.numfmt.thousandthPercentile",component:ThousandthPercentilePanel},{label:"sheet.numfmt.customFormat",component:CustomFormat}].map((item=>({...item,label:t(item.label)})))),[]),[type,typeSet]=(0,react.useState)(findDefaultType),[key,keySet]=(0,react.useState)((()=>`${row}_${col}`)),{mark,userHabitCurrency}=useCurrencyOptions((()=>keySet(`${row}_${col}_userCurrency'`))),BusinessComponent=(0,react.useMemo)((()=>typeOptions.find((item=>item.label===type))?.component),[type]);function findDefaultType(){return[isGeneralPanel,isAccountingPanel,isCurrencyPanel,isDatePanel,isThousandthPercentilePanel].reduce(((pre,curFn,index)=>pre||(curFn(defaultPattern)?typeOptions[index].label:"")),"")||typeOptions[0].label}const selectOptions=typeOptions.map((option=>({label:option.label,value:option.label}))),subProps={onChange:v=>{props.onChange({type:"change",value:v})},defaultValue,defaultPattern,action:getCurrentPattern};return(0,react.useEffect)((()=>{typeSet(findDefaultType()),keySet(`${row}_${col}`)}),[row,col]),(0,jsx_runtime.jsxs)("div",{className:"numfmt-panel p-b-20",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"label m-t-14",children:t("sheet.numfmt.numfmtType")}),(0,jsx_runtime.jsx)("div",{className:"m-t-8",children:(0,jsx_runtime.jsx)(design_src.l6,{onChange:value=>{typeSet(value),nextTick((()=>props.onChange({type:"change",value:getCurrentPattern.current()||""})))},options:selectOptions,value:type,style:{width:"100%"}})}),(0,jsx_runtime.jsx)("div",{children:BusinessComponent&&(0,jsx_runtime.jsx)(UserHabitCurrencyContext.Provider,{value:userHabitCurrency,children:(0,react.createElement)(BusinessComponent,{...subProps,key})})})]}),(0,jsx_runtime.jsxs)("div",{className:"btn-list m-t-14 m-b-20",children:[(0,jsx_runtime.jsx)(design_src.$n,{size:"small",onClick:()=>{props.onChange({type:"cancel",value:""})},className:"m-r-12",children:t("sheet.numfmt.cancel")}),(0,jsx_runtime.jsx)(design_src.$n,{type:"primary",size:"small",onClick:()=>{const pattern=getCurrentPattern.current()||"",currency=getCurrencyType(pattern);currency&&mark(currency),props.onChange({type:"confirm",value:pattern})},children:t("sheet.numfmt.confirm")})]})]})};SheetNumfmtPanel.__docgenInfo={description:"",methods:[],displayName:"SheetNumfmtPanel",props:{value:{required:!0,tsType:{name:"signature",type:"object",raw:"{ defaultValue: number; defaultPattern: string; row: number; col: number }",signature:{properties:[{key:"defaultValue",value:{name:"number",required:!0}},{key:"defaultPattern",value:{name:"string",required:!0}},{key:"row",value:{name:"number",required:!0}},{key:"col",value:{name:"number",required:!0}}]}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(config: { type: 'change' | 'cancel' | 'confirm'; value: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ type: 'change' | 'cancel' | 'confirm'; value: string }",signature:{properties:[{key:"type",value:{name:"union",raw:"'change' | 'cancel' | 'confirm'",elements:[{name:"literal",value:"'change'"},{name:"literal",value:"'cancel'"},{name:"literal",value:"'confirm'"}],required:!0}},{key:"value",value:{name:"string",required:!0}}]}},name:"config"}],return:{name:"void"}}},description:""}}};const Panel_stories={title:"numfmt",parameters:{layout:"centered"}},Test={render(){const{injector}=(0,react.useContext)(ui_src.WZ),[inject]=(0,react.useState)((()=>{const deps=[[UserHabitController]];return injector?.get(src.iH9).load({[src.VnV.EN_US]:en_US,[src.VnV.ZH_CN]:zh_CN,[src.VnV.RU_RU]:ru_RU}),deps.forEach((dependency=>injector?.add(dependency))),injector}));return(0,jsx_runtime.jsx)(ui_src.WZ.Provider,{value:{injector:inject},children:(0,jsx_runtime.jsx)(SheetNumfmtPanel,{value:{defaultPattern:"",defaultValue:123123,row:2,col:3},onChange:_pattern=>{}})})}},__namedExportsOrder=["Test"];Test.parameters={...Test.parameters,docs:{...Test.parameters?.docs,source:{originalSource:"{\n  render() {\n    const {\n      injector\n    } = useContext(RediContext);\n    const [inject] = useState(() => {\n      const deps: Dependency[] = [[UserHabitController]];\n      injector?.get(LocaleService).load({\n        [LocaleType.EN_US]: enUS,\n        [LocaleType.ZH_CN]: zhCN,\n        [LocaleType.RU_RU]: ruRU\n      });\n      deps.forEach(dependency => injector?.add(dependency));\n      return injector;\n    });\n    return <RediContext.Provider value={{\n      injector: inject\n    }}>\n                <SheetNumfmtPanel value={{\n        defaultPattern: '',\n        defaultValue: 123123,\n        row: 2,\n        col: 3\n      }} onChange={_pattern => {\n        // empty\n      }} />\n            </RediContext.Provider>;\n  }\n}",...Test.parameters?.docs?.source}}}}}]);